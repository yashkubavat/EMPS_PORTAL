<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leave Management - Employee Portal</title>
    <link rel="stylesheet" href="css/style-emp.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <button class="hamburger-btn" id="hamburgerBtn">
                <i class="fas fa-bars"></i>
            </button>
            <div class="logo">
                <i class="fas fa-user-circle"></i>
                <h1>Employee Portal</h1>
            </div>
        </div>
        <div class="header-right">
            <div class="user-info">
                <span id="headerUserName">Welcome, John</span>
                <i class="fas fa-user-circle"></i>
            </div>
        </div>
    </header>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="user-profile">
                <div class="profile-picture" id="profilePicture">
                    <i class="fas fa-user"></i>
                </div>
                <div class="user-details">
                    <h3 id="sidebarUserName">John Smith</h3>
                    <p id="sidebarUserRole">Software Engineer</p>
                    <p id="sidebarUserDept">Engineering Department</p>
                </div>
            </div>
        </div>
        
        <nav class="sidebar-nav">
            <ul>
                <li class="nav-item">
                    <a href="employee.html#profile" class="nav-link">
                        <i class="fas fa-user"></i>
                        <span>My Profile</span>
                    </a>
                </li>
                <!-- <li class="nav-item">
                    <a href="employee.html#attendance" class="nav-link">
                        <i class="fas fa-calendar-check"></i>
                        <span>Attendance</span>
                    </a>
                </li> -->
                <li class="nav-item active">
                    <a href="leave.html" class="nav-link">
                        <i class="fas fa-calendar-plus"></i>
                        <span>Leave Management</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="salary.html" class="nav-link">
                        <i class="fas fa-money-bill-wave"></i>
                        <span>Salary</span>
                    </a>
                </li>
                <!-- <li class="nav-item">
                    <a href="tasks.html" class="nav-link">
                        <i class="fas fa-tasks"></i>
                        <span>Tasks</span>
                        <span class="badge" id="taskBadge">3</span>
                    </a>
                </li> -->
                <li class="nav-item">
                    <a href="settings.html" class="nav-link">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="index.html" class="nav-link" id="logoutBtn">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Logout</span>
                    </a>
                </li>
            </ul>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <div class="content-wrapper">
            <!-- Leave Management Section -->
            <section class="content-section active" id="leaveSection">
                <div class="section-header">
                    <h2>Leave Management</h2>
                    <button class="btn btn-primary" id="requestLeaveBtn">
                        <i class="fas fa-plus"></i>
                        Request Leave
                    </button>
                </div>

                <!-- Leave Balance Summary -->
                <div class="leave-summary">
                    <div class="summary-card">
                        <div class="summary-icon">
                            <i class="fas fa-calendar-day"></i>
                        </div>
                        <div class="summary-content">
                            <h3>Annual Leave</h3>
                            <div class="balance-info">
                                <span class="balance-used">15 used</span>
                                <span class="balance-remaining">10 remaining</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 60%"></div>
                            </div>
                        </div>
                    </div>

                    <div class="summary-card">
                        <div class="summary-icon">
                            <i class="fas fa-heartbeat"></i>
                        </div>
                        <div class="summary-content">
                            <h3>Sick Leave</h3>
                            <div class="balance-info">
                                <span class="balance-used">3 used</span>
                                <span class="balance-remaining">7 remaining</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 30%"></div>
                            </div>
                        </div>
                    </div>

                    <div class="summary-card">
                        <div class="summary-icon">
                            <i class="fas fa-briefcase"></i>
                        </div>
                        <div class="summary-content">
                            <h3>Personal Leave</h3>
                            <div class="balance-info">
                                <span class="balance-used">2 used</span>
                                <span class="balance-remaining">3 remaining</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 40%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Leave History -->
                <div class="leave-content">
                    <div class="leave-history">
                        <h3>Leave History</h3>
                        <div class="leave-list" id="leaveList">
                            <!-- Leave items will be populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Upcoming Leaves -->
                    <div class="upcoming-leaves">
                        <h3>Upcoming Leaves</h3>
                        <div class="upcoming-list" id="upcomingList">
                            <!-- Upcoming leaves will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Request Leave Modal -->
    <!-- <div class="modal-overlay" id="requestLeaveModal">
        <div class="modal">
            <div class="modal-header">
                <h2>Request Leave</h2>
                <button class="modal-close" id="closeRequestModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form class="request-leave-form" id="requestLeaveForm">
                <div class="form-group">
                    <label for="leaveType">Leave Type *</label>
                    <select id="leaveType" name="leaveType" required>
                        <option value="">Select leave type</option>
                        <option value="annual">Annual Leave</option>
                        <option value="sick">Sick Leave</option>
                        <option value="personal">Personal Leave</option>
                        <option value="maternity">Maternity Leave</option>
                        <option value="paternity">Paternity Leave</option>
                    </select>
                    <span class="error-message" id="leaveTypeError"></span>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="startDate">Start Date *</label>
                        <input type="date" id="startDate" name="startDate" required>
                        <span class="error-message" id="startDateError"></span>
                    </div>
                    
                    <div class="form-group">
                        <label for="endDate">End Date *</label>
                        <input type="date" id="endDate" name="endDate" required>
                        <span class="error-message" id="endDateError"></span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="leaveReason">Reason for Leave *</label>
                    <textarea id="leaveReason" name="leaveReason" rows="4" placeholder="Please provide a detailed reason for your leave request" required></textarea>
                    <span class="error-message" id="leaveReasonError"></span>
                </div>
                
                <div class="form-group">
                    <label for="contactInfo">Emergency Contact</label>
                    <input type="text" id="contactInfo" name="contactInfo" placeholder="Emergency contact information">
                    <span class="error-message" id="contactInfoError"></span>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelRequestBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-paper-plane"></i>
                        Submit Request
                    </button>
                </div>
            </form>
        </div>
    </div> -->

    <!-- <script src="js/theme-manager.js"></script>
    <script src="js/script-emp.js"></script>
    <script>
        // Leave Management specific JavaScript
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize leave data
            initializeLeaveData();
            
            // Event listeners
            document.getElementById('requestLeaveBtn').addEventListener('click', openRequestModal);
            document.getElementById('closeRequestModal').addEventListener('click', closeRequestModal);
            document.getElementById('cancelRequestBtn').addEventListener('click', closeRequestModal);
            document.getElementById('requestLeaveForm').addEventListener('submit', submitLeaveRequest);
            
            // Close modal when clicking outside
            document.getElementById('requestLeaveModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeRequestModal();
                }
            });
        });

        function initializeLeaveData() {
            // Sample leave history data
            const leaveHistory = [
                {
                    id: 1,
                    type: 'Annual Leave',
                    startDate: '2024-07-15',
                    endDate: '2024-07-19',
                    status: 'Approved',
                    reason: 'Summer vacation with family'
                },
                {
                    id: 2,
                    type: 'Sick Leave',
                    startDate: '2024-06-20',
                    endDate: '2024-06-21',
                    status: 'Approved',
                    reason: 'Medical appointment'
                },
                {
                    id: 3,
                    type: 'Personal Leave',
                    startDate: '2024-05-10',
                    endDate: '2024-05-10',
                    status: 'Approved',
                    reason: 'Personal matters'
                }
            ];

            // Sample upcoming leaves
            const upcomingLeaves = [
                {
                    id: 4,
                    type: 'Annual Leave',
                    startDate: '2024-08-15',
                    endDate: '2024-08-20',
                    status: 'Pending',
                    reason: 'Family vacation'
                }
            ];

            renderLeaveHistory(leaveHistory);
            renderUpcomingLeaves(upcomingLeaves);
        }

        function renderLeaveHistory(leaves) {
            const leaveList = document.getElementById('leaveList');
            leaveList.innerHTML = '';

            leaves.forEach(leave => {
                const leaveItem = document.createElement('div');
                leaveItem.className = 'leave-item';
                leaveItem.innerHTML = `
                    <div class="leave-header">
                        <div class="leave-type">
                            <i class="fas fa-calendar-day"></i>
                            <span>${leave.type}</span>
                        </div>
                        <div class="leave-status ${leave.status.toLowerCase()}">
                            <span>${leave.status}</span>
                        </div>
                    </div>
                    <div class="leave-details">
                        <div class="leave-dates">
                            <span><i class="fas fa-calendar"></i> ${formatDate(leave.startDate)} - ${formatDate(leave.endDate)}</span>
                        </div>
                        <div class="leave-reason">
                            <span>${leave.reason}</span>
                        </div>
                    </div>
                `;
                leaveList.appendChild(leaveItem);
            });
        }

        function renderUpcomingLeaves(leaves) {
            const upcomingList = document.getElementById('upcomingList');
            upcomingList.innerHTML = '';

            if (leaves.length === 0) {
                upcomingList.innerHTML = '<p class="no-leaves">No upcoming leaves scheduled</p>';
                return;
            }

            leaves.forEach(leave => {
                const leaveItem = document.createElement('div');
                leaveItem.className = 'leave-item upcoming';
                leaveItem.innerHTML = `
                    <div class="leave-header">
                        <div class="leave-type">
                            <i class="fas fa-calendar-day"></i>
                            <span>${leave.type}</span>
                        </div>
                        <div class="leave-status ${leave.status.toLowerCase()}">
                            <span>${leave.status}</span>
                        </div>
                    </div>
                    <div class="leave-details">
                        <div class="leave-dates">
                            <span><i class="fas fa-calendar"></i> ${formatDate(leave.startDate)} - ${formatDate(leave.endDate)}</span>
                        </div>
                        <div class="leave-reason">
                            <span>${leave.reason}</span>
                        </div>
                    </div>
                `;
                upcomingList.appendChild(leaveItem);
            });
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
        }

        function openRequestModal() {
            document.getElementById('requestLeaveModal').classList.add('active');
        }

        function closeRequestModal() {
            document.getElementById('requestLeaveModal').classList.remove('active');
            document.getElementById('requestLeaveForm').reset();
        }

        function submitLeaveRequest(e) {
            e.preventDefault();
            
            // Get form data
            const formData = new FormData(e.target);
            const leaveData = Object.fromEntries(formData);
            
            // Validate form
            if (validateLeaveForm(leaveData)) {
                // Simulate API call
                console.log('Submitting leave request:', leaveData);
                
                // Show success message
                alert('Leave request submitted successfully!');
                closeRequestModal();
                
                // Refresh leave data
                initializeLeaveData();
            }
        }

        function validateLeaveForm(data) {
            let isValid = true;
            
            // Clear previous errors
            document.querySelectorAll('.error-message').forEach(el => el.textContent = '');
            
            if (!data.leaveType) {
                document.getElementById('leaveTypeError').textContent = 'Please select a leave type';
                isValid = false;
            }
            
            if (!data.startDate) {
                document.getElementById('startDateError').textContent = 'Please select a start date';
                isValid = false;
            }
            
            if (!data.endDate) {
                document.getElementById('endDateError').textContent = 'Please select an end date';
                isValid = false;
            }
            
            if (data.startDate && data.endDate && new Date(data.startDate) > new Date(data.endDate)) {
                document.getElementById('endDateError').textContent = 'End date must be after start date';
                isValid = false;
            }
            
            if (!data.leaveReason.trim()) {
                document.getElementById('leaveReasonError').textContent = 'Please provide a reason for leave';
                isValid = false;
            }
            
            return isValid;
        }
    </script> -->
</body>
</html> 